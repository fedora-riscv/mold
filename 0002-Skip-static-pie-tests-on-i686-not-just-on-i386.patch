From 9a48159c5aa7c79fc7d4ac41fa94c1ccd3708ea6 Mon Sep 17 00:00:00 2001
Message-Id: <9a48159c5aa7c79fc7d4ac41fa94c1ccd3708ea6.1651330992.git.github@sicherha.de>
In-Reply-To: <339ce3afe5ebbcc924df431153a0b8fc549b9dd8.1651330992.git.github@sicherha.de>
References: <339ce3afe5ebbcc924df431153a0b8fc549b9dd8.1651330992.git.github@sicherha.de>
From: Christoph Erhardt <github@sicherha.de>
Date: Thu, 28 Apr 2022 23:48:29 +0200
Subject: [PATCH 2/3] Skip `-static-pie` tests on i686, not just on i386

Signed-off-by: Christoph Erhardt <github@sicherha.de>
---
 test/elf/hello-static-pie.sh | 1 +
 test/elf/ifunc-static-pie.sh | 1 +
 2 files changed, 2 insertions(+)

diff --git a/test/elf/hello-static-pie.sh b/test/elf/hello-static-pie.sh
index 0921a876..6970ef9d 100755
--- a/test/elf/hello-static-pie.sh
+++ b/test/elf/hello-static-pie.sh
@@ -16,6 +16,7 @@ mkdir -p $t
 
 # We need to implement R_386_GOT32X relaxation to support PIE on i386
 [ $MACHINE = i386 ] && { echo skipped; exit; }
+[ $MACHINE = i686 ] && { echo skipped; exit; }
 
 [ $MACHINE = aarch64 ] && { echo skipped; exit; }
 
diff --git a/test/elf/ifunc-static-pie.sh b/test/elf/ifunc-static-pie.sh
index 4edcfabe..5977ee53 100755
--- a/test/elf/ifunc-static-pie.sh
+++ b/test/elf/ifunc-static-pie.sh
@@ -16,6 +16,7 @@ mkdir -p $t
 
 # We need to implement R_386_GOT32X relaxation to support PIE on i386
 [ $MACHINE = i386 ] && { echo skipped; exit; }
+[ $MACHINE = i686 ] && { echo skipped; exit; }
 
 # RISCV64 does not support IFUNC yet
 [ $MACHINE = riscv64 ] && { echo skipped; exit; }
-- 
2.35.1

